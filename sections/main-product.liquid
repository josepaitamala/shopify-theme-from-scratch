{% comment %}
    templates/product.liquid
    Simple product page: image left, details right, title, price, add to cart.
    Uses placeholder content when product or images are missing.
{% endcomment %}

<main class="product-page" role="main">
    <div class="container container--flex-dir-row">
        <section class="product-media" aria-label="Product images">
            {% if product and product.featured_image %}
                <img src="{{ product.featured_image | img_url: '1024x1024' }}" alt="{{ product.title | escape }}">
            {% else %}
                <img src="https://placehold.co/800x800" alt="Placeholder product image">
            {% endif %}
        </section>

        <section class="product-details" aria-label="Product details">
            <h1 class="product-title">{{ product.title }}</h1>

            <div class="product-price">
                {% if product %}
                    {% assign variant = product.selected_or_first_available_variant %}
                    {% if variant and variant.price %}
                        {{ variant.price | money }}
                    {% else %}
                        {{ product.price | default: 0 | money }}
                    {% endif %}
                {% endif %}
            </div>

            <div class="product-description">
                {% if product and product.description != blank %}
                    {{ product.description }}
                {% endif %}
            </div>

            {% form 'product', product %}
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                <label class="meta" for="quantity">Quantity</label>
                <div class="quantity">
                    <input id="quantity" name="quantity" type="number" min="1" value="1" inputmode="numeric" aria-label="Quantity">
                </div>

                {% if product.available %}
                    <button type="submit" class="add-to-cart">Add to cart</button>
                {% else %}
                    <button type="button" class="add-to-cart" disabled>Sold out</button>
                {% endif %}
            {% endform %}

            <div class="meta">
                SKU: {{ product.selected_or_first_available_variant.sku | default: "N/A" }}
            </div>
        
        </section>
    </div>
</main>

{% schema %}
{
    "name": "Main product",
    "settings": [],
    "blocks": [],
    "presets": [
        {
            "name": "Main product",
            "category": "Products"
        }
    ]
}
{% endschema %}